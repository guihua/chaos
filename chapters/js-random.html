<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <link rel="icon" href="./images/favicon.png"><title>桂花的私人厨房</title><meta name="description" content="桂花的私人厨房 ">
    <link rel="modulepreload" href="/assets/app.f239267c.js"><link rel="modulepreload" href="/assets/js-random.html.7810d0a3.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/js-random.html.ec025180.js">
    <link rel="stylesheet" href="/assets/style.b5235dab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo.png" alt="桂花的私人厨房"><span class="site-name can-hide">桂花的私人厨房</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/guihua/chaos.git" rel="noopener noreferrer" target="_blank" aria-label="Github 地址"><!--[--><!--]--> Github 地址 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/guihua/chaos.git" rel="noopener noreferrer" target="_blank" aria-label="Github 地址"><!--[--><!--]--> Github 地址 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">Chapters <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/chapters/gitbook.html" class="sidebar-item" aria-label="Gitbook 教程"><!--[--><!--]--> Gitbook 教程 <!--[--><!--]--></a><!----></li><li><a href="/chapters/sublime.html" class="sidebar-item" aria-label="Sublime 教程"><!--[--><!--]--> Sublime 教程 <!--[--><!--]--></a><!----></li><li><a href="/chapters/performance.html" class="sidebar-item" aria-label="/chapters/performance.md"><!--[--><!--]--> /chapters/performance.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/array.html" class="sidebar-item" aria-label="数组操作"><!--[--><!--]--> 数组操作 <!--[--><!--]--></a><!----></li><li><a href="/chapters/shuffle.html" class="sidebar-item" aria-label="/chapters/shuffle.md"><!--[--><!--]--> /chapters/shuffle.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/fe.html" class="sidebar-item" aria-label="一个前端的自我修养"><!--[--><!--]--> 一个前端的自我修养 <!--[--><!--]--></a><!----></li><li><a href="/chapters/interview.html" class="sidebar-item" aria-label="/chapters/interview.md"><!--[--><!--]--> /chapters/interview.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/dom.html" class="sidebar-item" aria-label="HTML DOM"><!--[--><!--]--> HTML DOM <!--[--><!--]--></a><!----></li><li><a href="/chapters/scrum.html" class="sidebar-item" aria-label="/chapters/scrum.md"><!--[--><!--]--> /chapters/scrum.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/bc-rect.html" class="sidebar-item" aria-label="/chapters/bc-rect.md"><!--[--><!--]--> /chapters/bc-rect.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/boom.html" class="sidebar-item" aria-label="/chapters/boom.md"><!--[--><!--]--> /chapters/boom.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/jquery.html" class="sidebar-item" aria-label="/chapters/jquery.md"><!--[--><!--]--> /chapters/jquery.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/css-spinners.html" class="sidebar-item" aria-label="/chapters/css-spinners.md"><!--[--><!--]--> /chapters/css-spinners.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/component.html" class="sidebar-item" aria-label="/chapters/component.md"><!--[--><!--]--> /chapters/component.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/overseas.html" class="sidebar-item" aria-label="/chapters/overseas.md"><!--[--><!--]--> /chapters/overseas.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/pm.html" class="sidebar-item" aria-label="/chapters/pm.md"><!--[--><!--]--> /chapters/pm.md <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="/chapters/js-random.md"><!--[--><!--]--> /chapters/js-random.md <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chapters/js-random.html#javascript中的随机数" class="router-link-active router-link-exact-active sidebar-item" aria-label="JavaScript中的随机数"><!--[--><!--]--> JavaScript中的随机数 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/chapters/js-random.html#基础的随机数" class="router-link-active router-link-exact-active sidebar-item" aria-label="基础的随机数"><!--[--><!--]--> 基础的随机数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#特定范围内的随机数" class="router-link-active router-link-exact-active sidebar-item" aria-label="特定范围内的随机数"><!--[--><!--]--> 特定范围内的随机数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#真假随机" class="router-link-active router-link-exact-active sidebar-item" aria-label="真假随机"><!--[--><!--]--> 真假随机 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#从数组中随机抽取数值" class="router-link-active router-link-exact-active sidebar-item" aria-label="从数组中随机抽取数值"><!--[--><!--]--> 从数组中随机抽取数值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#随机洗牌" class="router-link-active router-link-exact-active sidebar-item" aria-label="随机洗牌"><!--[--><!--]--> 随机洗牌 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#随机密码" class="router-link-active router-link-exact-active sidebar-item" aria-label="随机密码"><!--[--><!--]--> 随机密码 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#为什么是一个大约数" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么是一个大约数"><!--[--><!--]--> 为什么是一个大约数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#随机小数" class="router-link-active router-link-exact-active sidebar-item" aria-label="随机小数"><!--[--><!--]--> 随机小数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#避免小数四舍五入造成误差" class="router-link-active router-link-exact-active sidebar-item" aria-label="避免小数四舍五入造成误差"><!--[--><!--]--> 避免小数四舍五入造成误差 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/chapters/js-random.html#epsilon-ε-舍入" class="router-link-active router-link-exact-active sidebar-item" aria-label="Epsilon（ε）舍入"><!--[--><!--]--> Epsilon（ε）舍入 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/chapters/chart.html" class="sidebar-item" aria-label="/chapters/chart.md"><!--[--><!--]--> /chapters/chart.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/mac-svn.html" class="sidebar-item" aria-label="/chapters/mac-svn.md"><!--[--><!--]--> /chapters/mac-svn.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/javascript.html" class="sidebar-item" aria-label="/chapters/javascript.md"><!--[--><!--]--> /chapters/javascript.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/copy.html" class="sidebar-item" aria-label="/chapters/copy.md"><!--[--><!--]--> /chapters/copy.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/resource.html" class="sidebar-item" aria-label="/chapters/resource.md"><!--[--><!--]--> /chapters/resource.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/copy.html" class="sidebar-item" aria-label="/chapters/copy.md"><!--[--><!--]--> /chapters/copy.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/antd.html" class="sidebar-item" aria-label="Ant Design"><!--[--><!--]--> Ant Design <!--[--><!--]--></a><!----></li><li><a href="/chapters/git.config.html" class="sidebar-item" aria-label="配置git的SSH Key"><!--[--><!--]--> 配置git的SSH Key <!--[--><!--]--></a><!----></li><li><a href="/chapters/nodelist.html" class="sidebar-item" aria-label="/chapters/nodelist.md"><!--[--><!--]--> /chapters/nodelist.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/html5.1.html" class="sidebar-item" aria-label="/chapters/html5.1.md"><!--[--><!--]--> /chapters/html5.1.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/webstorm.html" class="sidebar-item" aria-label="/chapters/webstorm.md"><!--[--><!--]--> /chapters/webstorm.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/device.html" class="sidebar-item" aria-label="陀螺仪的基础知识"><!--[--><!--]--> 陀螺仪的基础知识 <!--[--><!--]--></a><!----></li><li><a href="/chapters/nvm.html" class="sidebar-item" aria-label="/chapters/nvm.md"><!--[--><!--]--> /chapters/nvm.md <!--[--><!--]--></a><!----></li><li><a href="/chapters/flash.html" class="sidebar-item" aria-label="/chapters/flash.md"><!--[--><!--]--> /chapters/flash.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Node <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/node/gulp.html" class="sidebar-item" aria-label="/node/gulp.md"><!--[--><!--]--> /node/gulp.md <!--[--><!--]--></a><!----></li><li><a href="/node/node-remove.html" class="sidebar-item" aria-label="/node/node-remove.md"><!--[--><!--]--> /node/node-remove.md <!--[--><!--]--></a><!----></li><li><a href="/node/net.html" class="sidebar-item" aria-label="使用 superagent 与 cheerio 完成简单爬虫"><!--[--><!--]--> 使用 superagent 与 cheerio 完成简单爬虫 <!--[--><!--]--></a><!----></li><li><a href="/node/homebrew.html" class="sidebar-item" aria-label="/node/homebrew.md"><!--[--><!--]--> /node/homebrew.md <!--[--><!--]--></a><!----></li><li><a href="/node/Mongoclient.html" class="sidebar-item" aria-label="/node/Mongoclient.md"><!--[--><!--]--> /node/Mongoclient.md <!--[--><!--]--></a><!----></li><li><a href="/node/npm.html" class="sidebar-item" aria-label="/node/npm.md"><!--[--><!--]--> /node/npm.md <!--[--><!--]--></a><!----></li><li><a href="/node/chmod.html" class="sidebar-item" aria-label="/node/chmod.md"><!--[--><!--]--> /node/chmod.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">React.js <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/react/react.html" class="sidebar-item" aria-label="/react/react.md"><!--[--><!--]--> /react/react.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Redux <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/redux/redux.html" class="sidebar-item" aria-label="/redux/redux.md"><!--[--><!--]--> /redux/redux.md <!--[--><!--]--></a><!----></li><li><a href="/redux/redux.glossary.html" class="sidebar-item" aria-label="/redux/redux.glossary.md"><!--[--><!--]--> /redux/redux.glossary.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">Vue.js <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue/vue.html" class="sidebar-item" aria-label="/vue/vue.md"><!--[--><!--]--> /vue/vue.md <!--[--><!--]--></a><!----></li><li><a href="/vue/vue.2.0.html" class="sidebar-item" aria-label="/vue/vue.2.0.md"><!--[--><!--]--> /vue/vue.2.0.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">JS排序 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/js-sort/sort.html" class="sidebar-item" aria-label="/js-sort/sort.md"><!--[--><!--]--> /js-sort/sort.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">PostCSS <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/postcss/chapter01.html" class="sidebar-item" aria-label="/postcss/chapter01.md"><!--[--><!--]--> /postcss/chapter01.md <!--[--><!--]--></a><!----></li><li><a href="/postcss/chapter02.html" class="sidebar-item" aria-label="/postcss/chapter02.md"><!--[--><!--]--> /postcss/chapter02.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p class="sidebar-item sidebar-heading">WeUI <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/weui/mixin.html" class="sidebar-item" aria-label="/weui/mixin.md"><!--[--><!--]--> /weui/mixin.md <!--[--><!--]--></a><!----></li><li><a href="/weui/touch.html" class="sidebar-item" aria-label="/weui/touch.md"><!--[--><!--]--> /weui/touch.md <!--[--><!--]--></a><!----></li><li><a href="/weui/page-manager.html" class="sidebar-item" aria-label="/weui/page-manager.md"><!--[--><!--]--> /weui/page-manager.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="javascript中的随机数" tabindex="-1"><a class="header-anchor" href="#javascript中的随机数" aria-hidden="true">#</a> JavaScript中的随机数</h2><p>在JavaScript中随机性经常都会使用到，但随机性也有许多种不同的类型，以及需要根据不同的应用程序选择不同的随机性。</p><h3 id="基础的随机数" tabindex="-1"><a class="header-anchor" href="#基础的随机数" aria-hidden="true">#</a> 基础的随机数</h3><p><code>JavaScript</code> 中有一个内置的 <code>Math.random()</code> 函数，可以帮你得到任意的随机数，比如：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Math.random(); // =&gt;0.19401081069372594
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>Math.random()</code> 函数经常返回 <code>0~1</code> 之间的浮点数。从技术上讲，<code>Math.random()</code> 返回的数会出现 <code>0</code>，但永远不会出现 <code>1</code>。</p><p>因为我们经常要使用 <code>Math.random()</code>，所以我们可以将它封装成一个简单的函数：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function getRandom () {
    return Math.random();
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>调用 <code>getRandom()</code> 函数和使用 <code>Math.random()</code> 效果等同：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>getRandom(); // =&gt;0.8312549368438933
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>封装的 <code>getRandom()</code> 函数得到的随机数依旧是在 <code>0~1</code> 之间的浮点数，但很多时候，需要的随机数是在一个特定的范围之内，比如 <code>10~100</code> 之内的一个随机整数。</p><h3 id="特定范围内的随机数" tabindex="-1"><a class="header-anchor" href="#特定范围内的随机数" aria-hidden="true">#</a> 特定范围内的随机数</h3><p>其实在上面的函数基础上，可以将其功能扩展一下，获取在某一个范围间的随机数（排队最大数和最小数）。实现这个功能，其实不难，但需要一顶点数学知识。</p><h4 id="浮点数" tabindex="-1"><a class="header-anchor" href="#浮点数" aria-hidden="true">#</a> 浮点数</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function getRandom(min, max) {
    return Math.random() * (max - min) + min;
}

getRandom(10, 100); // =&gt; 10.687806629219263
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="整数" tabindex="-1"><a class="header-anchor" href="#整数" aria-hidden="true">#</a> 整数</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function getRandom(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
}

getRandom(10, 100); // =&gt; 41
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面代码扩展获取的特定范围内的随机数，但不包括最大值 <code>max</code> 和最小值 <code>min</code>。但有的时候得到的随机数，还需要包括最大值 <code>max</code> 和最小值 <code>min</code>。实现这样的功能，并不难，只需要稍微改良一下上面的函数：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function getRandomInRange(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

getRandomInRange(10, 100); // =&gt; 63
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="真假随机" tabindex="-1"><a class="header-anchor" href="#真假随机" aria-hidden="true">#</a> 真假随机</h3><p>大家可能都玩过这样的一游戏，抛硬币。那么不管你怎么抛，都只有两个答案，一个正面（暂把它称为真，即 <code>1</code>），另一个则是反面（也就是假，即 <code>0</code>）。这样的游戏，我们也可以通过一个随机函数来帮我们实现：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function coinToss() {
    return Math.floor(Math.random() * 2);
}

coinToss(); // =&gt; 0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果你想得到随机的 <code>true</code> 和 <code>false</code> 值，可以这样做：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function coinToss() {
    return (Math.floor(Math.random() * 2) === 0);
}

coinToss(); // =&gt; false
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>还可以写得更简单一点：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function coinToss() {
    return Math.random() &lt; .5;
}

coinToss(); // =&gt; false
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>运用到刚才所说的抛硬币的游戏中，我们想要得到的是“正面”(<code>true</code>)还是“反面”(<code>false</code>)，那只需要根据得到的值再做一个简单的判断：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function coinFlip() {
    return (Math.floor(Math.random() * 2) === 0) ? &quot;正面&quot; : &quot;反面&quot;;
}

coinFlip(); // =&gt; &quot;正面&quot;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="从数组中随机抽取数值" tabindex="-1"><a class="header-anchor" href="#从数组中随机抽取数值" aria-hidden="true">#</a> 从数组中随机抽取数值</h3><p>除了在有限范围内取随机数之外，很多时候，我们还需要在一个数组中随机抽取数组中的数值：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var numPool = [1, 3, 5, 7, 9, 10],
    rand = numPool[Math.floor(Math.random() * numPool.length)];
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>有的时候，需要在一个数组中排除另外一个数组中的数组，并且将结果放到一个空的数组中：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var numPool = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
var excludePool = [3, 4];
var filteredPool = [];
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>通过一个 <code>for</code> 循环对原数组 <code>numPool</code> 做一个遍历，如果这个数存在于 <code>excludePool</code> 中，就将结果放到 <code>filteredPool</code> 中：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>for (var i = 0; i &lt; numPool.length; i++) {
    if (excludePool.indexOf(numPool[i]) === -1) {
        filteredPool.push(numPool[i]);
    }
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>最后从 <code>filteredPool</code> 取得随机数：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var rand = filteredPool[Math.floor(Math.random() * filteredPool.length)];
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="随机洗牌" tabindex="-1"><a class="header-anchor" href="#随机洗牌" aria-hidden="true">#</a> 随机洗牌</h3><p>随机洗牌在JavaScript中是一个典型的算法，创建一个数组，通过洗牌算法，将结果放在一个新数组，然后每次弹出一个数组元素：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var numPool = [13, 21, 36, 14, 27, 10];

function shuffle(numPool) {
    for (var j, x, i = numPool.length; i; j = parseInt(Math.random() * i), x = numPool[--i], numPool[i] = numPool[j], numPool[j] = x);
    return numPool;
}

var randomResult = shuffle(numPool);

while (randomResult.length &gt; 0) {
    console.log(randomResult.pop());
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上面的示例是在创建的数组中做随机排序，然后将数组的每个元素取出来。下面我们来看另一个示例，从一个范围内（比如 <code>0~1000</code>）随机取 <code>12</code> 数，并将他们创建成一个数组，同时取出数组中最后一个子元素。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var numReserve = [];

while (numReserve.length &lt; 12) {
    var randomNumber = Math.ceil(Math.random() * 1000);
    var found = false;
    for (var i = 0; i &lt; numReserve.length; i++) {
        if (numReserve[i] === randomNumber) {
            found = true;
            break;
        }
    }
}
if (!found) {
    numReserve[numReserve.length] = randomNumber;
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="随机密码" tabindex="-1"><a class="header-anchor" href="#随机密码" aria-hidden="true">#</a> 随机密码</h3><p>这些方法创建一个随机数字是足够了，但要使用 <code>Math.random()</code> 创建一个加密的随机安全密码是足足不够的。如果要实现这样的功能，我们可以使用网络加密的API(<strong>Web Cryptography API</strong>)创建一个 <code>typedArray</code>：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var cryptoStor = new Uint16Array(8);
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>在这个示例中，创建一个数组，这个数组使用了八个不同的插槽，每个插槽包含一个 <code>16</code> 位整数。除了 <code>Uint16Array</code> 之外，还有其他的选项：<code>Int8Array</code>、<code>Uint8Array</code>、<code>int16Array</code>、<code>Int32Array</code> 和 <code>Uint32Array</code>。</p><p>然后使用定义好的类型产生的随机数放到数组中：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>window.crypto.getRandomValues(cryptoStor);
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>在浏览器的控制台中，可以看到运行后的结果：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[37155, 40751, 61916, 11457, 54737, 37881, 61272, 49313]
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="为什么是一个大约数" tabindex="-1"><a class="header-anchor" href="#为什么是一个大约数" aria-hidden="true">#</a> 为什么是一个大约数</h3><p>JavaScript中有一个非常奇怪的地方，他实际是不存储整数的，它认为数值是一个二进制浮点数。再加上很多分数也无法用有限数量的小数表达出来，这意味着JavaScript可以创建这样的结果，如：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>.1 + .2; // =&gt; 0.30000000000000004
.2 * .1; // =&gt; 0.020000000000000004
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>出于实际目的，大多数情况之下这个不精确也并不是十分重要，我们讨论的是一个错误2/1000000000000000000,但它有点令人沮丧。但是它在处理代表货币的数字、百分比或者说文件大小，如此一来就有些怪怪的，而且我们需要的结果就得修复这些——设置小数精度。</p><p>许多实际使用当中，会使用四舍五入。比如说，一个用户正在操纵一系列元素，例如我们需要最近的整数的大约值，而不是处理小数。</p><h3 id="随机小数" tabindex="-1"><a class="header-anchor" href="#随机小数" aria-hidden="true">#</a> 随机小数</h3><p>在JavaScript中可以使用 <code>toFixed()</code> 和 <code>toPrecision()</code> 方法对小数进行截取。它们带有一个参数，决定有多少位有效数字或小数位：</p><ul><li><code>toFixed()</code> 提供了小数点后长度；</li><li><code>toPrecision()</code> 提供小数总长度；</li></ul><p>注意: <code>toFixed()</code> 是计算小数点后的长度，<code>toPrecision()</code> 是计算整个数字的长度，而且他们返回的都是字符串。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var num=2011.1456;
num.toFixed();       // =&gt; 2011,不传参数，默认为0,表示没有小数位
num.toFixed(2);      // =&gt; 2011.15,保留2位小数
num.toFixed(3);      // =&gt; 2011.146,保留3位小数
num.toFixed(6);      // =&gt; 2011.145600,保留6位小数,如果小数位不够，会在后面补0
num.toPrecision();   // =&gt; 2011.1456,不传参数，表示数字不变
num.toPrecision(6);  // =&gt; 2011.15,保留6位数字
num.toPrecision(7);  // =&gt; 2011.146,保留7位数字
num.toPrecision(10); // =&gt; 2011.145600,保留6位数字
num.toPrecision(2);  // =&gt; 2.0e+3,保留6位数字
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>特别声明：<code>toFixed()</code> 和 <code>toPrecision()</code> 两个方法返回的是一个字符串，如查你将他们的值做加法运算，会导产生错误，并不会得到你想要的结果：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var num = Math.PI;
var randNum = num.toFixed(2);
var rounded = num.toPrecision(4);
typeof(randNum); // =&gt; string
typeof(rounded); // =&gt; string
var addNum = randNum + rounded;
console.log(addNum); // =&gt;3.143.142
typeof(addNum); // =&gt; string
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果你想要结果是两个数的相加的得到的值，那得需要使用 <code>parseFloat()</code> 处理一下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var num = Math.PI;
var rounded = parseFloat(num.toFixed(2)) + parseFloat(num.toPrecision(4));
console.log(rounded); // =&gt; 6.282
toFixed()和toPrecision()方法可以给一个整数添加小数位，这样在处理货币的时候就特别的方便：

var wholeNum = 1
var dollarsCents = wholeNum.toFixed(2);
console.log(dollarsCents); // =&gt; 1.00
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="避免小数四舍五入造成误差" tabindex="-1"><a class="header-anchor" href="#避免小数四舍五入造成误差" aria-hidden="true">#</a> 避免小数四舍五入造成误差</h3><p>在下面的示例中，使用 <code>toFixed()</code> 和 <code>toPrecision()</code> 碰到大于或等于 <code>5</code> 的时，不会入值，反而是舍去：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var numTest = 1.005;
numTest.toFixed(2); // =&gt; 1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上述计算的结果应该是 <code>1.01</code> 而不是 <code>1</code>。避免这种错误在实际中很重要，建议使用Jack L Moore提供的指数数据计算方案，来避免这种错误：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function round(value, decimals) {
    return Number(Math.round(value+&#39;e&#39;+decimals)+&#39;e-&#39;+decimals);
}

round(1.005,2); // =&gt; 1.01
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="epsilon-ε-舍入" tabindex="-1"><a class="header-anchor" href="#epsilon-ε-舍入" aria-hidden="true">#</a> Epsilon（ε）舍入</h3><p>在ES6中提供了另一种方法，处理小数四舍五入。Machine epsilon提供了一个合理的方法，比较两个浮点数合理处理这个误差。</p><p>在Chrome的控制台中输入：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>0.1 + 0.2 // =&gt; 0.30000000000000004
0.1 + 0.2 === 0.3 // =&gt; false
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过 <code>Math.EPSILON</code> 函数可以做出一个正确的比较：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function epsEqu(x, y) {
    return Math.abs(x - y) &lt; Number.EPSILON * Math.max(Math.abs(x), Math.abs(y));
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>Math.EPSILON</code> 接受两个参数，一个是需要计算的表达式，另一个是需要做为比较的预期结果，然后用这两个值作为比较：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>epsEqu(0.1 + 0.2, 0.3); // =&gt; true
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/guihua/chaos.git/edit/main/chapters/js-random.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/chapters/pm.html" class="" aria-label="/chapters/pm.md"><!--[--><!--]--> /chapters/pm.md <!--[--><!--]--></a></span><span class="next"><a href="/chapters/chart.html" class="" aria-label="/chapters/chart.md"><!--[--><!--]--> /chapters/chart.md <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.f239267c.js" defer></script>
  </body>
</html>
